import sys
import graphviz as gv

# display usage message
def usage(bin_name):
    print("Usage: python %s <input_file> <output_graph_file>" % bin_name)

# parse arguments
def parse(bin_name,args):
    # accept only the two required arguments
    if(len(args)!=2):
        # case not, display usage message
        usage(bin_name)
        # and quit
        sys.exit(0)
    # case two supplied, return the two parms
    return args[0],args[1]

# Main itself
def main(input_file,output_graph):
	G=gv.Digraph(format='svg')
	previous=""
	for line in open(input_file):
		if previous!="":
			G.edge(previous,line.strip())
		previous=line.strip()
	G.render(output_graph)

# Entry Point
# Check who is calling
# By now, only direct calls are supported

if __name__ == '__main__':
        # start parsing args
        input_file,output_graph=parse(sys.argv[0],sys.argv[1:])

        # if ok, call main
        main(input_file,output_graph)
else:
        # Not Supported. Working on it.
        print("Module import not supported yet!")
        #So, exiting
        sys.exit(0)
